<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Personalised JPEG Quantization Table</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css"/>
    <script src="dct-based-encoder.js"></script>
    <script src="script.js"></script>
</head>
<body>
    <h1>Personalised JPEG Quantization Table</h1>
    <p id="explanation">
        Part of the JPEG image format standard includes a "Quantization Table" (an 8*8 matrix/array of values), 
        this essentially helps compress an image by going over each 8*8 block in a given image with it (lower values causing less compression). 
        Below is the table often used based on psycho-visual experiments, but by using the sliders next to the table, 
        you can manipulate it, then click the <b>Quantize</b> button to see the results to compress the image how you deem fit.
        <!-- <br><br>
        It will then produce the compression ratio below the <b>Quantize</b> button, if you are unsure of the compression, you can
        click on the <b>Before</b> image, to create a zoomed in version (which you can change the size of via the <b>sample size</b> 
        scale bar) below both images, or even upload your own image via the option below.
        <br><br>
        By default it has been made to only produce grayscale images (by averaging each colour then applying the compression), due to
        performance reasons, although if you do wish to view the compressed image in colour, click the <b>Use Colour (SLOWER)</b> button.
        <br><br>
        Also, if you do wish to keep your Personalised Quantization Table, you can click the <b>Copy Table Array</b> button to add it to
        your clipboard, this can be used in many programming languages, or, can be saved and pasted back into the website at a later date. -->
    </p>
    <article>
        <section><h2>Before</h2></section>
        <section><h2>Quantize</h2></section>
        <section><h2>After</h2></section>
    </article>
    <article>
        <section>
            <div id="lennaBeforeSelectedBox"></div>
            <canvas id="cnvsLennaBefore" width="512" height="512"></canvas>
            <canvas id="cnvsBeforeSnippet" width="512" height="512"></canvas>
        </section>
        <section>
            <div>
                <p id="warningText" class="noselect red">_</p>
            
                <div id="canvasMain">
                    <canvas id="table" width="400px" height="400px"></canvas>
                    <br>
                    <button id="default">Reset Table</button>
                </div>

                <div id="scales">
                    <div><p class="noselect">Low</p><input type="range" id="low" class="scale" min="0" max="1" step="0.05" defaultValue="0.5"></div>
                    <div><p class="noselect">Low-Mid</p><input type="range" id="low-mid" class="scale" min="0" max="1" step="0.05" defaultValue="0.5"></div>
                    <div><p class="noselect">Mid</p><input type="range" id="mid" class="scale" min="0" max="1" step="0.05" defaultValue="0.5"></div>
                    <div><p class="noselect">Mid-High</p><input type="range" id="mid-high" class="scale" min="0" max="1" step="0.05" defaultValue="0.5"></div>
                    <div><p class="noselect">High</p><input type="range" id="high" class="scale" min="0" max="1" step="0.05" defaultValue="0.5"></div>
                </div>

                <input id="txtTable" type="text" pattern="(\[((\[((([1-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]),){7}([1-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\]),){7}(\[((([1-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]),){7}([1-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\])\])">
                <button id="copy">Copy</button>
                <button id="paste">Paste</button>
                
                <button id="generate">Quantize</button>
                <div id="meta">
                    <div class="loader"></div>
                </div>

                <p id="txtUpload">Upload your own JPEG: </p><input id="upload" type='file'/>

                <p>Sample size <span id="txtSize">16*16</span>: <input type="range" id="size" min="8" max="128" step="1" value="16"></p>
                <div id="generateElements">
                    <button id="colourSwitch">Use Colour (SLOWER)</button>
                </div>

        </section>
        <section>
            <canvas id="cnvsLennaAfter" width="512" height="512"></canvas>
            <canvas id="cnvsAfterSnippet" width="512" height="512"></canvas>
        </section>
    </article>
</body>
</html>